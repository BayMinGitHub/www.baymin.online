{"meta":{"title":"å…”å­çš„ä¸ªäººå°ç«™","subtitle":null,"description":"åšå®¢,æ¸¸æˆ","author":"BayMin","url":"https://39.97.115.194","root":"/"},"pages":[{"title":"404 Not Found","date":"2019-05-09T09:05:02.330Z","updated":"2019-05-09T09:05:02.330Z","comments":true,"path":"404.html","permalink":"https://39.97.115.194/404.html","excerpt":"","text":"404 Not Found å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"æœ‹å‹","date":"2019-05-10T07:49:40.999Z","updated":"2019-05-10T07:49:40.999Z","comments":true,"path":"friends/index.html","permalink":"https://39.97.115.194/friends/index.html","excerpt":"","text":"æ¬¢è¿å„ä½å¤§ä½¬ç•™è¨€äº’æ¢å‹é“¾ï¼Œæ ¼å¼å¦‚ä¸‹ï¼šåç§°ï¼š BayMinç½‘å€ï¼š https://www.baymin.onlineå¤´åƒï¼š https://www.baymin.online/img/avatar.pngæ ‡ç­¾ï¼š Java,æ•°æ®åº“"},{"title":"","date":"2019-05-09T08:17:02.191Z","updated":"2019-05-09T08:17:02.191Z","comments":true,"path":"mylist/index.html","permalink":"https://39.97.115.194/mylist/index.html","excerpt":"","text":""},{"title":"å…³äºå°ç«™","date":"2019-05-09T03:22:57.714Z","updated":"2019-05-09T03:22:57.714Z","comments":true,"path":"about/index.html","permalink":"https://39.97.115.194/about/index.html","excerpt":"","text":"æœ¬ç«™å¼€å§‹åˆ›å»ºäº2019å¹´5æœˆ5æ—¥ã€‚"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2019-05-09T02:45:49.156Z","updated":"2019-05-09T02:45:49.156Z","comments":true,"path":"tags/index.html","permalink":"https://39.97.115.194/tags/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2019-05-10T07:50:10.397Z","updated":"2019-05-10T07:50:10.397Z","comments":true,"path":"categories/index.html","permalink":"https://39.97.115.194/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"Linuxç³»ç»Ÿä¸‹æ­å»ºé¥¥è’ä¸“ç”¨æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ä¸»æœºï¼‰","slug":"Linuxç³»ç»Ÿä¸‹æ­å»ºé¥¥è’ä¸“ç”¨æœåŠ¡å™¨","date":"2019-04-24T08:29:00.000Z","updated":"2019-05-16T03:28:57.409Z","comments":true,"path":"2019/04/24/Linuxç³»ç»Ÿä¸‹æ­å»ºé¥¥è’ä¸“ç”¨æœåŠ¡å™¨/","link":"","permalink":"https://39.97.115.194/2019/04/24/Linuxç³»ç»Ÿä¸‹æ­å»ºé¥¥è’ä¸“ç”¨æœåŠ¡å™¨/","excerpt":"ä»é›¶å¼€å§‹çš„é¥¥è’ä¸“ç”¨æœåŠ¡å™¨æ•™ç¨‹~~~","text":"ä»é›¶å¼€å§‹çš„é¥¥è’ä¸“ç”¨æœåŠ¡å™¨æ•™ç¨‹~~~ å‰è¨€ç»å¸¸ç©å•æœºæ¸¸æˆçš„ç©å®¶éƒ½ä¼šçŸ¥é“ï¼Œåœ¨è”æœºè¿‡ç¨‹ä¸­æˆ¿ä¸»çš„ç½‘ç»œçŠ¶æ€å’Œç”µè„‘æ€§èƒ½å½±å“ç€æ•´ä¸ªæˆ¿é—´ä¸­ç©å®¶çš„æ¸¸æˆä½“éªŒï¼Œåœ¨æˆ¿ä¸»ç½‘ç»œçŠ¶æ€å·®æˆ–ç”µè„‘æ€§èƒ½ä½çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‡ºç°å¡é¡¿ï¼Œä¸¢åŒ…ç”šè‡³æ‰çº¿çš„æƒ…å†µã€‚è¿™æ˜¯ç”±äºåœ¨æˆ¿ä¸»å¼€æ¸¸æˆçš„æ—¶å€™ï¼Œä¼šåœ¨å…¶ç”µè„‘æœ¬åœ°å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ç«¯ï¼Œç„¶åç©å®¶çš„æ¸¸æˆå®¢æˆ·ç«¯éƒ½ä¸è¿™ä¸ªæœåŠ¡å™¨ç«¯è¿æ¥ï¼Œè¿›è¡Œè”æœºæ¸¸æˆï¼Œå½“æˆ¿ä¸»ç”µè„‘æ€§èƒ½ä¸è¶³æˆ–è€…ç½‘ç»œæ³¢åŠ¨æ—¶ï¼Œå¿…å®šä¼šå½±å“æ•´ä¸ªæœåŠ¡å™¨ä¸­çš„ç©å®¶ä½“éªŒã€‚ 1.å‡†å¤‡â‘  ç”¨æ¥ä¹°äº‘ä¸»æœºçš„ Money â€¦ ( å—¯ â€¦ é’±æ˜¯å¾ˆé‡è¦çš„ .. ä¸è¿‡å¯ä»¥è€ƒè™‘ä¸€ä¸‹å­¦ç”Ÿæœº ,å¦‚æœè¿˜æ˜¯å­¦ç”Ÿçš„è¯ ) â‘¡ ä¸€å°å¯ä»¥ä¸Šç½‘çš„ç”µè„‘ ( åºŸè¯ ) â‘¢ SSHè¿æ¥å·¥å…· ( æ¨èXshell,å…è´¹ç‰ˆå³å¯ï¼Œæå–ç ï¼šidvz ) 2.è´­ä¹°äº‘ä¸»æœºæ­¤å¤„ä½¿ç”¨é˜¿é‡Œäº‘ä¸»æœºä½œä¸ºç¤ºä¾‹ã€‚ é¦–å…ˆæ‰“å¼€é˜¿é‡Œäº‘å®˜ç½‘ï¼Œæ³¨å†Œâ€¦ç™»é™†â€¦å®ååˆ¶ä¹‹ç±»çš„ä¸œè¥¿ï¼Œç„¶åæ‰“å¼€è´­ä¹°é¡µé¢ ï¼š æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦. 1 åœ°åŸŸï¼šæœåŠ¡å™¨åœ°åŒºå°½é‡é€‰æ‹©ç¦»ä½ è¾ƒè¿‘çš„åœ°åŸŸï¼Œå¯ä»¥æœ‰æ•ˆé™ä½å»¶è¿Ÿã€‚ å®ä¾‹ï¼šä¸€å®šä¸è¦å› ä¸ºä¾¿å®œè€Œé€‰çªå‘æ€§å®ä¾‹ï¼Œè¿™ä¸ªè§„æ ¼çš„äº‘ä¸»æœºæ¯å¤©åªæœ‰2ä¸ªå¤šå°æ—¶æ˜¯æ»¡æ€§èƒ½çš„ï¼Œå…¶ä»–æƒ…å†µä¸‹éƒ½æ˜¯è¶…çº§å¡çš„çŠ¶æ€ ( æ˜¾ç„¶æˆ‘æ˜¯ä¹°è¿‡çš„â€¦ğŸ˜­ ) é•œåƒï¼šé€‰æ‹©CentOS 7.6 64ä½ ( å¦‚æœä¼šLinuxç›¸å…³çŸ¥è¯†ï¼Œç³»ç»Ÿå¯è‡ªå·±é€‰æ‹© ) å­˜å‚¨ï¼šé»˜è®¤40Gï¼Œå®Œå…¨å¤Ÿç”¨äº† ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œè¿›å…¥ç½‘ç»œå’Œå®‰å…¨ç»„é…ç½®ï¼š æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 2 ç½‘ç»œï¼šé»˜è®¤ å…¬ç½‘å¸¦å®½ï¼šé€‰æ‹©æŒ‰å›ºå®šå¸¦å®½1M ( å¤šäººå¯ä»¥è€ƒè™‘2Mï¼Œå¦‚æœç”¨é‡ä¸å¤§å¯ä»¥é€‰æ‹©æŒ‰é‡ä»˜è´¹ï¼Œä¸è¿‡ä¸ç¡®å®šä¸€ä¸ªæœˆçš„å…·ä½“æµé‡ ) å®‰å…¨ç»„ï¼šé»˜è®¤ ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œè¿›å…¥ç³»ç»Ÿé…ç½®ï¼š ç™»å½•å‡­è¯ï¼šé€‰æ‹©è‡ªå®šä¹‰å¯†ç ï¼Œè¾“å…¥ç™»å½•å¯†ç  ( ä»¥åå¯ä»¥åœ¨æ§åˆ¶å°é‡ç½®å¯†ç  ) å…¶ä»–é»˜è®¤ï¼Œç„¶åç¡®è®¤è®¢å•ï¼Œä»˜æ¬¾ã€‚ å…³äºæœåŠ¡å™¨é…ç½®çš„é€‰æ‹©ï¼Œè´´ä¸€å¼ å®˜ç½‘çš„å›¾ï¼š æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦. 3 æ„æ€å°±æ˜¯ï¼š â‘  ä¸€ä¸ªç©å®¶éœ€è¦8Kb/sçš„ä¸Šä¼ å¸¦å®½ ( äº‘ä¸»æœºçš„å®½å¸¦é€šå¸¸å°±æ˜¯æŒ‡çš„ä¸Šä¼ å¸¦å®½ï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“æ»¡è¶³ ) â‘¡ ä¸€ä¸ªç©å®¶å¤§çº¦éœ€è¦65Må†…å­˜ ( å†…å­˜æ˜¯éœ€è¦é‡è§†çš„é—®é¢˜ï¼Œé€šå¸¸ç©é¥¥è’éƒ½ä¼šå¼€å¯ä¸¤ä¸ªä¸–ç•Œï¼šä¸€ä¸ªåœ°ä¸Šï¼Œä¸€ä¸ªåœ°ä¸‹ã€‚å› æ­¤åœ¨è®¡ç®—å†…å­˜çš„æ—¶å€™ï¼Œå¦‚æœä½ é€‰æ‹©å¼€å¯ä¸¤ä¸ªä¸–ç•Œï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®éœ€è¦ä¹˜ä¸Š2ã€‚è€Œä¸”è¿™ä¸ªæ˜¯æŒ‡ä¸å¼€ä»»ä½•Modçš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ˜¯å¤§å‹Modï¼Œå†…å­˜å ç”¨æ˜¯å¾ˆå¯æ€•çš„ã€‚ä¹‹å‰è¯•è¿‡ä¸€æ¬¡æ™ºèƒ½æ•Œå¯¹ï¼Œä¸€ä¸ªä¸–ç•Œçš„è¿›ç¨‹èƒ½åƒ1Gçš„å†…å­˜ ) â‘¢ ä¸æ˜¯å¾ˆæ¸…æ¥šå®ƒè¯´çš„CPUæ˜¯N/Aæ˜¯ä»»æ„çš„æ„æ€ä¹ˆï¼Œå¯æ˜¯å®é™…ä¸ŠåæœŸä¸–ç•Œä¸­çš„ç”Ÿç‰©è¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹ï¼ŒCPUç‰¹åˆ«å®¹æ˜“çˆ† ( æ¨èå®‰è£…æœåŠ¡å™¨æ¸…ç†Mod ) â‘£ éœ€è¦çš„ç¯å¢ƒ å‚è€ƒ : æˆ‘ä½¿ç”¨çš„æ˜¯1æ ¸2G2Må¸¦å®½çš„æœåŠ¡å™¨ ,ä¸€å¹´è´¹ç”¨æ˜¯1000+ï¼Œåœ¨è£…æœ‰æœåŠ¡å™¨æ¸…ç†Modçš„æƒ…å†µä¸‹ï¼Œæ­£å¸¸6äººç©åˆ°200å¤šå¤©æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ï¼Œä¸è¿‡åœ¨é’è›™é›¨å’Œèœ˜è››åŒºçš„æ—¶å€™è¿˜æ˜¯ä¼šå¾ˆå¡ã€‚( åæ§½ä¸€ä¸‹ï¼šåƒåœ¾æ¸¸æˆæ¸£ä¼˜åŒ–ï¼Œä»¥å‰å¼„æ±‚ç”Ÿä¹‹è·¯æœåŠ¡å™¨çš„æ—¶å€™ï¼Œå®Œå…¨ä¸éœ€è¦è€ƒè™‘å†…å­˜çš„é—®é¢˜ï¼Œé¥¥è’è¿™ç§è´´å›¾æ¸¸æˆå®åœ¨æ˜¯å¤ªåƒå†…å­˜äº†â€¦ğŸ˜’ ) 3.é…ç½®å¹¶è¿æ¥äº‘ä¸»æœºä»˜æ¬¾åï¼Œè¿‡ä¸€åˆ†é’Ÿå·¦å³å°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°äº‘ä¸»æœºäº†ï¼Œæ˜¾ç¤ºçš„éƒ½æ˜¯ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œè®°å½•ä¸‹å…¬ç½‘IPåœ°å€ã€‚ç„¶åæŒ‰ç…§ä¸‹å›¾è¿›å…¥å®‰å…¨ç»„é…ç½®ï¼š æ­¤å¤„åº”ç”¨å›¾ç‰‡ã€‚ã€‚ã€‚ 4 ç‚¹å‡»é…ç½®è§„åˆ™ï¼š( é¥¥è’æœåŠ¡å™¨é»˜è®¤ç«¯å£ä¸º10999å’Œ10998ï¼Œå› æ­¤éœ€è¦å¼€å¯è¿™ä¸¤ä¸ªç«¯å£ ) æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 5 æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 6 æ‰“å¼€Xshellå·¥å…·ï¼Œä½¿ç”¨å¿«æ·é”®ALT+Næ–°å»ºè¿æ¥ï¼Œå¦‚ä¸‹å›¾ ( ä¹Ÿå¯ä»¥ç‚¹å‡» -&gt; æ–‡ä»¶ -&gt; æ–°å»º )ï¼š æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 7 æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 8 ç‚¹å‡»è¿æ¥ï¼Œä¸‹é¢çš„æç¤ºç‚¹å‡»ç¡®å®šï¼Œè¿›å…¥ä¸‹é¢çš„ç•Œé¢å°±è¡¨ç¤ºè¿æ¥æˆåŠŸï¼š æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 9 4.ä¸‹è½½å¹¶å®‰è£…æ¸¸æˆæ¥ä¸‹æ¥å°±æ˜¯æ“ä½œLinuxç³»ç»Ÿäº†ï¼Œä¸‹é¢å‘½ä»¤æŒ‰è¡Œæ•²å…¥çª—å£ä¸­ï¼ŒæŒ‰å›è½¦é”®æ‰§è¡Œã€‚ é¦–å…ˆæ›´æ–°yum ( Linuxç³»ç»Ÿä¸­å®‰è£…è½¯ä»¶åŒ…çš„å·¥å…· ) : 12yum updateyum upgrade -y å®‰è£…æ¸¸æˆè¿è¡Œç¯å¢ƒå’Œå¸¸ç”¨å·¥å…· 1yum install glibc.i686 libstdc++.i686 libcurl.i686 vim screen -y åˆ›å»ºsteamç”¨æˆ· 12345useradd steam su steamcd ~mkdir steamcmdcd steamcmd ä¸‹è½½å¹¶è§£å‹Steamçš„Linuxå®¢æˆ·ç«¯steamcmd 12wget https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gztar -zxvf steamcmd_linux.tar.gz å¯åŠ¨Steamå®¢æˆ·ç«¯ï¼Œå¹¶å¼€å§‹ä¸‹è½½é¥¥è’ ( é¥¥è’ä¸“ç”¨æœåŠ¡å™¨IDä¸º 343050 ) 1./steamcmd.sh +login anonymous +force_install_dir /home/dst +app_update 343050 validate +quit ä¸‹è½½å®Œæ¯•å ( å¤§æ¦‚ååˆ†é’Ÿå·¦å³ )ï¼Œå…ˆå¯åŠ¨ä¸€æ¬¡æœåŠ¡å™¨ï¼ŒéªŒè¯æ˜¯å¦ç¼ºå¤±ä¾èµ– 12cd /home/steam/dst/bin~/dst/bin/dontstarve_dedicated_server_nullrenderer -cluster MyDediServer -shard Master æ­¤æ—¶å¯èƒ½ä¼šæŠ¥æ‰¾ä¸åˆ°libcurl-gnutls.so.4ï¼Œè§£å†³æ–¹æ³•ä¸ºå°†è¯¥ä¾èµ–åº“å¤åˆ¶åˆ°é¥¥è’æ¸¸æˆæ–‡ä»¶å¤¹ä¸­ï¼š 1cp /usr/lib/libcurl.so.4 ~/dst/bin/lib32/libcurl-gnutls.so.4 è¿™é‡Œå¯èƒ½ä¼šæœ‰å…¶ä»–ä¾èµ–åŒ…çš„ç¼ºå¤±é—®é¢˜ï¼Œè§£å†³åŠæ³•å³æ˜¯å°†ä¾èµ–å¤åˆ¶åˆ°é¥¥è’æ¸¸æˆæ–‡ä»¶å¤¹ä¸­ã€‚ æ­£å¸¸å¯åŠ¨åï¼ŒæŒ‰Ctrl+Cå³å¯å…³é—­æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ§åˆ¶å°å‘½ä»¤c_shutdown()ã€‚ PSï¼šé¥¥è’æœåŠ¡å™¨æ§åˆ¶å°æŒ‡ä»¤è‡ªè¡Œç™¾åº¦ã€‚ 5.å­˜æ¡£é…ç½®åœ¨å­˜æ¡£é…ç½®ä¹‹å‰ï¼Œæˆ‘ä»¬ç°åœ¨ç”µè„‘ä¸Šæ‰“å¼€é¥¥è’è”æœºç‰ˆæ¸¸æˆï¼Œè¿›å…¥ä¸»ç•Œé¢ï¼Œç‚¹å‡»ä¸‹é¢çš„å®˜ç½‘æŒ‰é’®ï¼ŒæŸ¥çœ‹ä¸ªäººIDå’Œä¸ªäººæœåŠ¡å™¨çš„tokenï¼Œå¦‚ä¸‹ï¼š 12ä¸ªäººID: KU_uG******æœåŠ¡å™¨token: pds-g^KU_uGVY9tdU^M***************************Sdsg50g4A6jg= æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 10 11 12 é¥¥è’é»˜è®¤å­˜æ¡£ä½ç½®åœ¨ç”¨æˆ·ç›®å½•ä¸­.kielæ–‡ä»¶å¤¹ä¸­ ( ~/.kiel/DoNotStarveTogether)ï¼Œç”±äºæˆ‘ä»¬åœ¨ä¸Šé¢çš„å¯åŠ¨å‘½ä»¤ä¸­å¢åŠ äº†-clusterå‚æ•°ï¼Œå› æ­¤ä¼šåœ¨è¯¥æ–‡ä»¶å¤¹ä¸­è‡ªåŠ¨åˆ›å»ºåä¸ºMyDediServerçš„å­˜æ¡£æ–‡ä»¶å¤¹ï¼Œå¦‚æœä¸æŒ‡å®šè¯¥å‚æ•°ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”ŸæˆCluster_1çš„æ–‡ä»¶å¤¹ã€‚ç”±äºé¥¥è’æœåŠ¡å™¨ç›´æ¥é…ç½®æ–‡ä»¶å¤ªè¿‡å¤æ‚ï¼Œè¿™é‡Œæ¨èä½¿ç”¨å­˜æ¡£æ›¿æ¢çš„æ–¹å¼ã€‚ é¦–å…ˆåœ¨ä¸ªäººç”µè„‘ä¸Šå¯åŠ¨æ¸¸æˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°ä¸–ç•Œ ( æ­¤å¤„è®°ä½æœåŠ¡å™¨æ ä½1~5 ) ï¼Œè‡ªå®šä¹‰è‡ªå·±çš„ä¸–ç•Œé…ç½®å’ŒModé…ç½®ï¼Œå¯åŠ¨ä¸–ç•Œåç­‰åˆ°é€‰äººç•Œé¢æ—¶é€€å‡º æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 13 åœ¨æ¸¸æˆé¦–é¡µç‚¹å‡»å­˜æ¡£å›¾æ ‡ï¼Œè¿›å…¥æœ¬åœ°å­˜æ¡£ç›®å½•ï¼ŒæŒ‰ç…§ä½ åˆšæ‰çš„æ ä½æ‰¾åˆ°åä¸ºCluster_[æ ä½]çš„æ–‡ä»¶å¤¹ï¼Œå³ä¸ºåˆšæ‰åˆ›å»ºçš„ä¸–ç•Œå­˜æ¡£ï¼Œå¤åˆ¶å½“å‰æ–‡æ¡£è·¯å¾„ï¼Œä¾‹å¦‚ï¼šF:\\æˆ‘çš„æ–‡æ¡£\\Klei\\DoNotStarveTogether\\Cluster_1 æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 14 æ‰“å¼€Xftpå·¥å…·ï¼Œç›´æ¥ç‚¹å‡»ä¸‹å›¾æ‰€ç¤ºå›¾æ ‡å³å¯ æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 15 å·¦è¾¹ä¸ºæœ¬åœ°æ–‡ä»¶ç›®å½•ï¼Œå³è¾¹ä¸ºè¿œç¨‹æœåŠ¡å™¨æ–‡ä»¶ç›®å½• æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 16 åœ¨å·¦è¾¹ç²˜è´´åˆšæ‰å¤åˆ¶çš„æ–‡æ¡£è·¯å¾„ï¼Œå›è½¦è¿›å…¥ï¼›å³è¾¹è¾“å…¥æœåŠ¡å™¨å­˜æ¡£ç›®å½•å³ /home/steam/.klei/DoNotStarveTogether/MyDediServerï¼Œå›è½¦è¿›å…¥ æ­¤å¤„åº”æœ‰å›¾ç‰‡â€¦ 17 æ–‡ä»¶å¯¹åº”è¯´æ˜ï¼š â‘  Master æ–‡ä»¶å¤¹ä¸ºä¸»ä¸–ç•Œå³åœ°é¢ä¸–ç•Œå­˜æ¡£åŠé…ç½® â‘¡ Caves æ–‡ä»¶å¤¹ä¸ºæ´ç©´ä¸–ç•Œå­˜æ¡£åŠé…ç½® â‘¢ cluser.ini æ–‡ä»¶ä¸ºæœåŠ¡å™¨ä¿¡æ¯ï¼Œä¸–ç•Œåç§°ï¼Œå¯†ç ç­‰ â‘£ cluster_token.txt ä¸ºæœåŠ¡å™¨ token â‘¤ Master å’Œ Caves ä¸­å…±æœ‰çš„ : 1234567backup -&gt; æœåŠ¡å™¨æ—¥å¿—åŠèŠå¤©æ—¥å¿—å­˜æ¡£save -&gt;å­˜æ¡£æ–‡ä»¶å¤¹sever_chat_log.txt -&gt; æœåŠ¡å™¨æ­¤æ¬¡å¯åŠ¨ä¸­ç©å®¶çš„èŠå¤©å†…å®¹server_log.txt -&gt; æœåŠ¡å™¨æ—¥å¿—server.ini -&gt; ä¸–ç•Œçš„é…ç½®ä¿¡æ¯ï¼Œç«¯å£ç­‰leveldataoverride.lua-&gt;ä¸–ç•Œé…ç½®æ–‡ä»¶ï¼Œå³ä¸ºä¸–ç•Œè¯¦ç»†é…ç½®ï¼Œå¯ä»¥ç›´æ¥å¯¹å…¶æ›´æ”¹ï¼Œæ¥å®Œæˆå¯¹ä¸–ç•Œçš„è‡ªå®šä¹‰modoverrides.lua -&gt; Modé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å¯¹å…¶ä¿®æ”¹å®ŒæˆæœåŠ¡å™¨Modé…ç½® ç›´æ¥é€‰ä¸­å·¦ä¾§æ‰€æœ‰æ–‡ä»¶åŠæ–‡ä»¶å¤¹ï¼Œæ‹–æ‹½è‡³å³ä¾§ï¼Œé€‰æ‹©å…¨éƒ¨è¦†ç›–ï¼Œç­‰å¾…æ–‡ä»¶å…¨éƒ¨ä¼ è¾“è‡³æœåŠ¡å™¨å³å¯å…³é—­ã€‚ç„¶åå†æ¬¡å›åˆ°Xshellçª—å£ ( ç”±äºåˆ›å»ºsteamç”¨æˆ·æ—¶æ²¡æœ‰å¢åŠ å¯†ç ï¼Œå› æ­¤ä¸Šä¼ æ–‡ä»¶æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯rootç”¨æˆ·ï¼Œæ­¤æ—¶éœ€è¦å…ˆæ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€… ) 123exitchown -R steam:steam /home/steam su steam å†è¿›å…¥å­˜æ¡£æ–‡ä»¶å¤¹ï¼Œä¿®æ”¹æœåŠ¡å™¨tokenï¼š 123456cd /home/steam/.klei/DoNotStarveTogether/MyDediServer# ç¼–è¾‘cluster_token.txtvim cluster_token.txt# æ­¤æ—¶æŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œåœ¨æ–‡ä»¶ä¸­è¾“å…¥ä¹‹å‰è·å–çš„æœåŠ¡å™¨tokenpds-g^KU_uGVY9tdU^M***************************Sdsg50g4A6jg=# ç¼–è¾‘å®Œæˆï¼ŒæŒ‰ESCï¼Œè¾“å…¥:wq å›è½¦ï¼Œå³ä¸ºä¿å­˜å¹¶é€€å‡º ç¼–è¾‘ç®¡ç†å‘˜åˆ—è¡¨ ( éå¿…é¡» ) : 12345# ç¼–è¾‘adminlist.txtç®¡ç†å‘˜åˆ—è¡¨ï¼Œè¾“å…¥ä½ æƒ³æ·»åŠ çš„ç©å®¶IDï¼ˆç±»ä¼¼äºä¹‹å‰è·å–çš„ä¸ªäººIDï¼‰ç”±äºæœåŠ¡å™¨tokenæ‰€æœ‰è€…é»˜è®¤æ‹¥æœ‰ç®¡ç†å‘˜æƒé™ï¼Œå› æ­¤ä¸éœ€è¦æ·»åŠ è‡ªå·±çš„IDï¼Œæ­¤å¤„ä»…åšä¸ºå‚è€ƒvim adminlist.txt# è¾“å…¥KU_uG******# ç¼–è¾‘å®Œæˆï¼ŒæŒ‰ESCï¼Œè¾“å…¥:wq å›è½¦ï¼Œå³ä¸ºä¿å­˜å¹¶é€€å‡º ç¼–è¾‘é»‘åå•åˆ—è¡¨ ( éå¿…é¡» ) : 1234vim blocklist.txt# è¾“å…¥é»‘åå•ç©å®¶IDxxxxxxx# ç¼–è¾‘å®Œæˆï¼ŒæŒ‰ESCï¼Œè¾“å…¥:wq å›è½¦ï¼Œå³ä¸ºä¿å­˜å¹¶é€€å‡º 6.MODä¸‹è½½åŠä½¿ç”¨Modçš„é…ç½®æ–‡ä»¶å³ä¸ºä¸Šé¢æ‰€è¯´çš„modoverrides.luaï¼Œä½¿ç”¨ç¼–è¾‘é¡µé¢æ‰“å¼€ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061return &#123; [\"workshop-1160616621\"]=&#123; configuration_options=&#123; Language=\"def\", Ownership=true, Travel_Cost=32 &#125;, enabled=false &#125;, [\"workshop-1216718131\"]=&#123; configuration_options=&#123; clean=true, lang=true, stack=true &#125;, enabled=true &#125;, [\"workshop-362175979\"]=&#123; configuration_options=&#123; [\"Draw over FoW\"]=\"disabled\" &#125;, enabled=true &#125;, [\"workshop-378160973\"]=&#123; configuration_options=&#123; ENABLEPINGS=true, FIREOPTIONS=2, OVERRIDEMODE=false, SHAREMINIMAPPROGRESS=true, SHOWFIREICONS=true, SHOWPLAYERICONS=true, SHOWPLAYERSOPTIONS=2 &#125;, enabled=true &#125;, [\"workshop-703758203\"]=&#123; configuration_options=&#123; &#125;, enabled=true &#125;, [\"workshop-804317397\"]=&#123; configuration_options=&#123; buffgo=false, fhl_cos=0.05, fhl_hjopen=false, likeornot=false, openli=false, openlight=false, zzj_cankanshu=false, zzj_canuseashammer=false, zzj_canuseasshovel=false, zzj_canwakuang=false, zzj_finiteuses=210, zzj_fireopen=false, zzj_pre=1 &#125;, enabled=true &#125;,-- Show Me [\"workshop-666155465\"]=&#123; configuration_options=&#123; food_estimation=-1, food_order=0, food_style=0, lang=\"chs\", show_food_units=-1 &#125;, enabled=true &#125;,-- å¤æ´» [\"workshop-462434129\"]=&#123; configuration_options=&#123; MOD_RESTART_ALLOW_KILL=false, MOD_RESTART_ALLOW_RESTART=true, MOD_RESTART_ALLOW_RESURRECT=true, MOD_RESTART_CD_KILL=100, MOD_RESTART_CD_RESTART=100, MOD_RESTART_CD_RESURRECT=100, MOD_RESTART_FORCE_DROP_MODE=1, MOD_RESTART_IGNORING_ADMIN=true, MOD_RESTART_TRIGGER_MODE=1, MOD_RESTART_WELCOME_TIPS=true, MOD_RESTART_WELCOME_TIPS_TIME=6 &#125;, enabled=false &#125;&#125; workshop-[id] æ­¤å¤„IDå³ä¸ºåˆ›æ„å·¥åŠä¸­è¿æ¥çš„IDï¼Œå¯ç›´æ¥åœ¨åˆ›æ„å·¥åŠä¸­æŸ¥çœ‹ï¼›configuration_optionsé…ç½®é€‰é¡¹åŒæ¸¸æˆä¸­Modé…ç½®ç›¸åŒï¼Œç”±äºä¸æ¸…æ¥šå…·ä½“é…ç½®å†…å®¹ï¼Œä¸æ¨èæ‰‹åŠ¨ä¿®æ”¹ã€‚ é‚£å¦‚ä½•ä¸‹è½½Modå‘¢ï¼Ÿé¦–å…ˆéœ€è¦ç¼–è¾‘æ–‡ä»¶ï¼š 1234567891011vim ~/dst/mods/dedicated_server_mods_setup.lua# åœ¨æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ : ( æ‹¬å·ä¸­ä¸º Mod åœ¨åˆ›æ„å·¥åŠä¸­çš„ idï¼Œå†…å®¹æŒ‰ç…§è‡ªèº«æœåŠ¡å™¨æ‰€éœ€Modå¡«å†™ ) ServerModSetup(\"1216718131\")ServerModSetup(\"375850593\")ServerModSetup(\"378160973\")ServerModSetup(\"458587300\")ServerModSetup(\"703758203\")ServerModSetup(\"804317397\")ServerModSetup(\"1699254645\")# ä¿å­˜é€€å‡º# PS:æ­¤å¤„è¿˜å¯ä»¥ç›´æ¥è¾“å…¥Modåˆé›†ï¼Œå³ServerModCollectionSetup(\"[id]\") é…ç½®è¿‡ä¹‹åï¼Œä¸‹æ¬¡å¯åŠ¨æ¸¸æˆæ—¶å°±ä¼šè‡ªåŠ¨ä¸‹è½½Modå¹¶å¯ç”¨ã€‚ 7.å¯åŠ¨æ¸¸æˆå¯ä»¥ç›´æ¥å¯åŠ¨ ( æ¨èä½¿ç”¨è„šæœ¬ ) : 12345cd ~/dst/bin# å¯åŠ¨åœ°é¢ä¸–ç•Œ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Master# å¯åŠ¨æ´ç©´ä¸–ç•Œ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Caves ç¼–å†™å¯åŠ¨è„šæœ¬ï¼š 1234567891011121314151617181920212223mkdir ~/dst_scriptcd ~/dst_scripttouch dst_master.shtouch dst_caves.shchmod a+x dst_master.shchmod a+x dst_caves.sh# ç¼–è¾‘æ ‡æœ¬vim dst_master.sh# è¾“å…¥#!/bin/bashcd ~/dst/binscreen -dmS \"dst_overworld\" ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Master# ä¿å­˜é€€å‡ºvim dst_caves.sh# è¾“å…¥#!/bin/bashcd ~/dst/binscreen -dmS \"dst_caves\" ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Caves# ä¿å­˜é€€å‡º ä½¿ç”¨ screen -dmS å‘½ä»¤å¯åŠ¨è¿›ç¨‹æ—¶ï¼Œä¸ä¼šæ˜¾ç¤ºå¯¹åº”çš„æ§åˆ¶å°ã€‚å¦‚æœéœ€è¦ä½¿ç”¨æ§åˆ¶å°ï¼Œåˆ™éœ€è¦ä½¿ç”¨ 123456# æ¢å¤åˆ°åœ°é¢ä¸–ç•Œè¿›ç¨‹screen -r dst_overworld# éšè—æ§åˆ¶å°æŒ‰ä¸‹Ctrl+Aç„¶åæŒ‰ä¸‹Ctrl+Då³å¯# æ¢å¤åˆ°æ´ç©´ä¸–ç•Œè¿›ç¨‹screen -r dst_caves# éšè—æ§åˆ¶å°æŒ‰ä¸‹Ctrl+Aç„¶åæŒ‰ä¸‹Ctrl+Då³å¯ å¯åŠ¨æ¸¸æˆï¼Œè¿è¡Œè„šæœ¬ 12./dst_master.sh./dst_caves.sh ç­‰æœåŠ¡å™¨å¯åŠ¨åï¼Œå³å¯åœ¨å¤§å…æœç´¢åˆ°å¯¹åº”æœåŠ¡å™¨ã€‚ 8.å…³äºæ›´æ–°ç¼–å†™æ›´æ–°è„šæœ¬ 123touch ~/dst_script/update.shchmod a+x ~/dst_script/update.shvim ~/dst_script/update.sh è¾“å…¥ 12345678#!/bin/bash#æ›´æ–°æ¸¸æˆ~/steamcmd/steamcmd.sh +login anonymous +force_install_dir /home/steam/dst +app_update 343050 validate +quit#æ›´æ–°modcd /home/steam/dst/bin~/dst/bin/dontstarve_dedicated_server_nullrenderer -only_update_server_mods æ‰§è¡Œæ—¶éœ€è¦å…³é—­æœåŠ¡å™¨ã€‚ é¥¥è’çš„æ¸¸æˆå­˜æ¡£ä½ç½®é»˜è®¤ä¸º ~/.kiel/DoNotStarveTogether/ä¸­ï¼Œä¸Šé¢æˆ‘ä»¬å¯åŠ¨å‘½ä»¤ä¸­æŒ‡å®šäº†-clusterçš„å‚æ•°ï¼Œæ¸¸æˆå°±ä¼šå†ä¸Šè¿°æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºMyDediServerçš„æ–‡ä»¶å¤¹ï¼Œè‹¥ä¸æŒ‡å®šè¯¥å‚æ•°ï¼Œé»˜è®¤åˆ›å»ºCluster_1ã€‚","categories":[{"name":"æ¸¸æˆæœåŠ¡å™¨","slug":"æ¸¸æˆæœåŠ¡å™¨","permalink":"https://39.97.115.194/categories/æ¸¸æˆæœåŠ¡å™¨/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://39.97.115.194/tags/Linux/"},{"name":"é¥¥è’","slug":"é¥¥è’","permalink":"https://39.97.115.194/tags/é¥¥è’/"},{"name":"ä¸“ç”¨æœåŠ¡å™¨","slug":"ä¸“ç”¨æœåŠ¡å™¨","permalink":"https://39.97.115.194/tags/ä¸“ç”¨æœåŠ¡å™¨/"},{"name":"Shell","slug":"Shell","permalink":"https://39.97.115.194/tags/Shell/"},{"name":"é˜¿é‡Œäº‘","slug":"é˜¿é‡Œäº‘","permalink":"https://39.97.115.194/tags/é˜¿é‡Œäº‘/"}]},{"title":"ç”ŸæˆExcelå’ŒCSVçš„å·¥å…·ç±»","slug":"ç”ŸæˆExcelå’ŒCSVçš„å·¥å…·ç±»","date":"2019-01-21T01:12:00.000Z","updated":"2019-05-15T08:12:25.023Z","comments":true,"path":"2019/01/21/ç”ŸæˆExcelå’ŒCSVçš„å·¥å…·ç±»/","link":"","permalink":"https://39.97.115.194/2019/01/21/ç”ŸæˆExcelå’ŒCSVçš„å·¥å…·ç±»/","excerpt":"ä½¿ç”¨Javaç¼–å†™çš„ç”ŸæˆExcelå’ŒCSVçš„å·¥å…·ç±»ã€‚","text":"ä½¿ç”¨Javaç¼–å†™çš„ç”ŸæˆExcelå’ŒCSVçš„å·¥å…·ç±»ã€‚ ç”±äºæ•°æ®é‡è¿‡å¤§æ—¶ï¼Œç”ŸæˆExcelé€Ÿåº¦å¾ˆæ…¢ï¼Œè¿‡ç¨‹ä¸­å†…å­˜å ç”¨é‡å¾ˆå¤§ã€‚å› æ­¤å½“æ•°æ®æ¡æ•°å¤§äº10000æ—¶ï¼Œä¸æ”¯æŒç”ŸæˆExcelæ–‡ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨CopyManagerï¼ˆpostgresqlä¸­çš„å·¥å…·ï¼‰æ¥ç”ŸæˆCSVæ–‡ä»¶ã€‚ åˆ©ç”¨æŸ¥è¯¢åçš„ç»“æœç”ŸæˆExcelå’ŒCSVæ–‡ä»¶çš„ä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206import com.unicom.simpledemo.dao.UserDefinedSQLMapper;import lombok.extern.slf4j.Slf4j;import org.apache.poi.ss.usermodel.CellStyle;import org.apache.poi.ss.usermodel.HorizontalAlignment;import org.apache.poi.xssf.streaming.SXSSFCell;import org.apache.poi.xssf.streaming.SXSSFRow;import org.apache.poi.xssf.streaming.SXSSFSheet;import org.apache.poi.xssf.streaming.SXSSFWorkbook;import org.postgresql.copy.CopyManager;import org.postgresql.core.BaseConnection;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import javax.servlet.http.HttpSession;import java.io.*;import java.sql.Connection;import java.sql.DriverManager;import java.util.*;/** * Author by BayMin, Date on 2018/11/15. */@Slf4j@Componentpublic class ExportUtils &#123; private static String driverClass; private static String dbUrl; private static String dbUserName; private static String dbPassword; @Value(\"$&#123;spring.datasource.druid.driver-class-name&#125;\") public void setDriverClass(String str) &#123; driverClass = str; &#125; @Value(\"$&#123;spring.datasource.druid.url&#125;\") public void setDbUrl(String str) &#123; dbUrl = str; &#125; @Value(\"$&#123;spring.datasource.druid.username&#125;\") public void setDbUserName(String str) &#123; dbUserName = str; &#125; @Value(\"$&#123;spring.datasource.druid.password&#125;\") public void setDbPassword(String str) &#123; dbPassword = str; &#125; /** * æ ¹æ®æŸ¥è¯¢ç»“æœç”ŸæˆExcel * * @return ç”Ÿæˆçš„Excel */ @SuppressWarnings(\"unchecked\") public static SXSSFWorkbook mapListToExcel(HttpSession session, UserDefinedSQLMapper userDefinedSQLMapper) &#123; List&lt;LinkedHashMap&lt;String, Object&gt;&gt; linkedHashMaps = null; int rows = (int) session.getAttribute(\"rows\"); if (rows &gt;= 10000) &#123; log.error(\"è¡Œæ•°ä¸º\" + rows + \"ï¼Œä¸å°äº10000è¡Œï¼Œæ— æ³•å¯¼å‡ºä¸ºExcelè¡¨æ ¼ï¼\"); return null; &#125; linkedHashMaps = (List&lt;LinkedHashMap&lt;String, Object&gt;&gt;) session.getAttribute(\"linkedHashMaps\"); log.info(\"æ­£åœ¨ç”ŸæˆExcelè¡¨æ ¼...\"); SXSSFWorkbook workbook = new SXSSFWorkbook(100); SXSSFSheet sheet = workbook.createSheet(\"result\"); SXSSFRow row = sheet.createRow(0); CellStyle style = workbook.createCellStyle(); style.setAlignment(HorizontalAlignment.CENTER); LinkedList&lt;String&gt; keys = (LinkedList&lt;String&gt;) session.getAttribute(\"keys\"); int columnNum = keys.size(); for (int i = 0; i &lt; columnNum; i++) &#123; SXSSFCell cell = row.createCell(i); cell.setCellValue(keys.get(i)); cell.setCellStyle(style); sheet.trackAllColumnsForAutoSizing(); sheet.autoSizeColumn(i); &#125; for (int i = 0; i &lt; linkedHashMaps.size(); i++) &#123; row = sheet.createRow(i + 1); if (linkedHashMaps.get(i) != null) &#123; Iterator&lt;Map.Entry&lt;String, Object&gt;&gt; iterator = linkedHashMaps.get(i).entrySet().iterator(); int j = 0; while (iterator.hasNext()) &#123; Map.Entry&lt;String, Object&gt; next = iterator.next(); if (next.getValue() != null) &#123; row.createCell(j++).setCellValue(next.getValue().toString()); &#125; else &#123; row.createCell(j++).setCellValue(\"\"); &#125; &#125; &#125; else &#123; row.createCell(0).setCellValue(\"\"); &#125; &#125; log.info(\"ç”ŸæˆExcelè¡¨æ ¼å®Œæˆï¼\"); return workbook; &#125; /** * å¯¼å‡ºExcel * * @param workbook éœ€è¦å¯¼å‡ºçš„Excel */ public static void exportExcel(HttpServletRequest request, HttpServletResponse response, SXSSFWorkbook workbook) &#123; response.setContentType(\"application/vnd.ms-excel\"); response.setHeader(\"Content-disposition\", \"attachment;filename=Table-\" + Utils.parseDate(new Date()) + \".xlsx\"); try &#123; OutputStream outputStream = response.getOutputStream(); workbook.write(outputStream); outputStream.flush(); outputStream.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; /** * å¯¼å‡ºCSVæ–‡ä»¶ * * @param session session(å…¶ä¸­åŒ…å«sql) */ @SuppressWarnings(\"unchecked\") public static void exportCSV(HttpServletRequest request, HttpServletResponse response, HttpSession session) &#123; LinkedList&lt;String&gt; keys = (LinkedList&lt;String&gt;) session.getAttribute(\"keys\"); StringBuilder tableHead = new StringBuilder(); for (String str : keys) &#123; tableHead.append(str).append(\",\"); &#125; String headString = tableHead.substring(0, tableHead.length() - 1); headString = headString.concat(\"\\n\"); try &#123; response.setContentType(\"text/csv\"); response.setHeader(\"Content-disposition\", \"attachment;filename=Table-\" + Utils.parseDate(new Date()) + \".csv\"); OutputStream outputStream = response.getOutputStream(); if ((int) session.getAttribute(\"rows\") &gt;= 10000) &#123; exportCSVBySQL(request, response, session, headString, outputStream); &#125; else &#123; exportCSVBySession(request, response, session, headString, outputStream); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; @SuppressWarnings(\"unchecked\") private static void exportCSVBySession(HttpServletRequest request, HttpServletResponse response, HttpSession session, String headString, OutputStream outputStream) &#123; StringBuilder stringBuilder = new StringBuilder(headString); String csv = \"\"; List&lt;LinkedHashMap&lt;String, Object&gt;&gt; linkedHashMapsTop500 = (List&lt;LinkedHashMap&lt;String, Object&gt;&gt;) session.getAttribute(\"linkedHashMaps\"); for (LinkedHashMap&lt;String, Object&gt; linkedHashMap : linkedHashMapsTop500) &#123; for (Map.Entry&lt;String, Object&gt; next : linkedHashMap.entrySet()) &#123; if (next.getValue() != null) &#123; stringBuilder.append(next.getValue().toString()); &#125; stringBuilder.append(\",\"); &#125; stringBuilder.deleteCharAt(stringBuilder.length() - 1).append(\"\\n\"); &#125; csv = stringBuilder.substring(0, stringBuilder.length() - 1); outputStreamWrite(csv, outputStream); try &#123; outputStream.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; private static void exportCSVBySQL(HttpServletRequest request, HttpServletResponse response, HttpSession session, String headString, OutputStream outputStream) &#123; outputStreamWrite(headString, outputStream); String sql = session.getAttribute(\"sql\").toString(); try &#123; Class.forName(driverClass); Connection connection = DriverManager.getConnection(dbUrl, dbUserName, dbPassword); CopyManager copyManager = new CopyManager((BaseConnection) connection); copyManager.copyOut(\"copy (\" + sql + \") to stdout with csv\", outputStream); outputStream.flush(); outputStream.close(); &#125; catch (Exception e) &#123; log.error(\"ä½¿ç”¨COPYå‘½ä»¤å¯¼å‡ºCSVæ–‡ä»¶å‡ºé”™ï¼Œå½“å‰SQLä¸ºï¼š\" + sql); e.printStackTrace(); &#125; &#125; private static void outputStreamWrite(String info, OutputStream outputStream) &#123; byte[] bytes = info.getBytes(); InputStream inputStream = new ByteArrayInputStream(bytes); byte[] buff = new byte[1024]; int len; try &#123; while ((len = inputStream.read(buff)) != -1) &#123; outputStream.write(buff, 0, len); outputStream.flush(); &#125; inputStream.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"Java","slug":"Java","permalink":"https://39.97.115.194/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://39.97.115.194/tags/Java/"},{"name":"å·¥å…·ç±»","slug":"å·¥å…·ç±»","permalink":"https://39.97.115.194/tags/å·¥å…·ç±»/"}]},{"title":"Greenplumæ•°æ®åº“è¿ç§»","slug":"Greenplumæ•°æ®åº“è¿ç§»","date":"2018-12-12T00:20:00.000Z","updated":"2019-05-13T08:15:43.238Z","comments":true,"path":"2018/12/12/Greenplumæ•°æ®åº“è¿ç§»/","link":"","permalink":"https://39.97.115.194/2018/12/12/Greenplumæ•°æ®åº“è¿ç§»/","excerpt":"ç”±äºä¹‹å‰çš„æ•°æ®åº“ä½¿ç”¨å¹´é™è¿‡ä¹…ï¼Œæœºå™¨æ€§èƒ½æ— æ³•æ»¡è¶³æ—¥å¸¸è®¡ç®—éœ€è¦ï¼Œå› æ­¤å…¬å¸æœ€è¿‘æ–°è´­å…¥äº†è‹¥å¹²æœåŠ¡å™¨ï¼Œå¹¶å‡†å¤‡å°†æ•°æ®è¿ç§»è‡³æ–°åº“ä¸­ã€‚åœ¨æ­£å¼è¿ç§»ä¹‹å‰ï¼Œé€šè¿‡æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œè¿›è¡Œä¸€æ¬¡æ¨¡æ‹Ÿè¿ç§»ã€‚","text":"ç”±äºä¹‹å‰çš„æ•°æ®åº“ä½¿ç”¨å¹´é™è¿‡ä¹…ï¼Œæœºå™¨æ€§èƒ½æ— æ³•æ»¡è¶³æ—¥å¸¸è®¡ç®—éœ€è¦ï¼Œå› æ­¤å…¬å¸æœ€è¿‘æ–°è´­å…¥äº†è‹¥å¹²æœåŠ¡å™¨ï¼Œå¹¶å‡†å¤‡å°†æ•°æ®è¿ç§»è‡³æ–°åº“ä¸­ã€‚åœ¨æ­£å¼è¿ç§»ä¹‹å‰ï¼Œé€šè¿‡æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œè¿›è¡Œä¸€æ¬¡æ¨¡æ‹Ÿè¿ç§»ã€‚ 1.å‡†å¤‡â‘  VMware Workstationè½¯ä»¶ â‘¡ CentOS 7.3 é•œåƒ ( ä¸è€æœåŠ¡å™¨ç›¸åŒ ) â‘¢ Greenplum 4.3.7.3 å®‰è£…åŒ… ( https://network.pivotal.io/products/pivotal-gpdb/ ) 2.å®‰è£…è™šæ‹Ÿæœºä¿®æ”¹æ—¶åŒºï¼Œæœ€å°å®‰è£…ï¼š æ·»åŠ rootç”¨æˆ·å¯†ç ï¼š å®‰è£…å®Œæˆåï¼Œä¿®æ”¹IPåœ°å€ï¼š 1vi /etc/sysconfig/netword-scripts/ifcfg-eno*** 123456789101112131415161718192021TYPE=EthernetBOOTPROTO=staticDEFROUTE=yesPEERDNS=yesPEERROUTES=yesIPV4_FAILURE_FATAL=noIPV6INIT=yesIPV6_AUTOCONF=yesIPV6_DEFROUTE=yesIPV6_PEERDNS=yesIPV6_PEERROUTES=yesIPV6_FAILURE_FATAL=noNAME=eno16777736UUID=5bed79bf-0f21-40fe-a92c-63aa29d0dbddDEVICE=eno16777736ONBOOT=yesIPADDR=192.168.216.128NETMASK=255.255.255.0GATEWAY=192.168.216.2DNS1=114.114.114.114DNS2=8.8.8.8 é‡å¯networkæœåŠ¡ï¼Œå¹¶ä½¿ç”¨pingæµ‹è¯•æ˜¯å¦å¯ä»¥è¿æ¥åˆ°å¤–ç½‘ï¼š 1service network restart å®‰è£…ä¸€äº›éœ€è¦çš„å·¥å…·ï¼š 1yum -y install vim net-tools ntp ed unzip è®¾ç½®å¼€æœºæ—¶é—´åŒæ­¥è„šæœ¬ï¼š 1vim /etc/rc.d/init.d/timelock.sh 12345678910#!/bin/bash##Startup script for timelock##chkconfig:345 85 15#description:timelock server#processname:timelock #Source function library./usr/sbin/ntpdate -u ntp1.aliyun.com å¢åŠ è„šæœ¬çš„å¯æ‰§è¡Œæƒé™å¹¶æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹ç›®ä¸­ï¼š 1234chmod a+x /etc/rc.d/init.d/autostart.shcd /etc/rc.d/init.dchkconfig --add autostart.shchkconfig autostart.sh on ä¿®æ”¹ç³»ç»Ÿå†…æ ¸ ( Greenpluméœ€è¦ )ï¼š 1vim /etc.sysctl.conf 12345678910111213141516171819kernel.shmmax = 500000000kernel.shmmni = 4096kernel.shmall = 4000000000kernel.sem = 250 512000 100 2048kernel.sysrq = 1kernel.core_uses_pid = 1kernel.msgmnb = 65536kernel.msgmax = 65536kernel.msgmni = 2048net.ipv4.tcp_syncookies = 1net.ipv4.ip_forward = 0net.ipv4.conf.default.accept_source_route = 0net.ipv4.tcp_tw_recycle = 1net.ipv4.tcp_max_syn_backlog = 4096net.ipv4.conf.all.arp_filter = 1net.ipv4.ip_local_port_range = 1025 65535net.core.netdev_max_backlog = 10000net.core.rmem_max = 2097152net.core.wmem_max = 209715 æ‰“å¼€æ–‡ä»¶é™åˆ¶ : ( åœ¨æœ€åæ·»åŠ  ) 1vim /etc/security/limits.conf 1234* soft nofile 65536* hard nofile 65536* soft nproc 131072* hard nproc 131072 åˆ›å»ºgpadminç”¨æˆ·å’Œç”¨æˆ·ç»„ ( æ¯å°éƒ½éœ€è¦é…ç½® ) ï¼š 123groupadd -g 530 gpadminuseradd -g 530 -u530 -m -d /home/gpadmin -s /bin/bash gpadminpasswd gpadmin å…³é—­é˜²ç«å¢™ï¼š 12systemctl stop firewalld.servicesystemctl disable firewalld.service 3.æ‹·è´ä¸¤ä»½è™šæ‹Ÿæœºåˆ†åˆ«ä¿®æ”¹IPã€hostnameï¼Œé…ç½®hosts 1234567192.168.216.128 Master master192.168.216.129 sdw1192.168.216.130 sdw2 192.168.216.138 Master_standby master_standby gp_master_standby192.168.216.139 sdw1_standby segment_standby segment192.168.216.140 sdw2_standby mirror_standby mirror é‡å¯ï¼Œå‡†å¤‡å®‰è£…æ•°æ®åº“ã€‚ 4.å®‰è£…æ•°æ®åº“é¦–å…ˆåœ¨MasterèŠ‚ç‚¹ä¸Šæ“ä½œï¼š â€‹ åˆ‡æ¢ç”¨æˆ·gpadminï¼Œè§£å‹ä¸‹è½½çš„æ•°æ®åº“æ–‡ä»¶å¹¶è¿è¡Œgreenplum-db-*.binå®‰è£…æ–‡ä»¶ ( å®‰è£…è¿‡ç¨‹ä¸­æ³¨æ„æ•°æ®åº“å®‰è£…ä½ç½® ) åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š 1mkdir ./conf 1vim ./conf/hostlist 123Master_standbysdw1_standbysdw2_standby 1vim ./conf/set_host 12sdw1_standbysdw2_standby å¼•å…¥Greenplumçš„ç¯å¢ƒå˜é‡ï¼š 1source ./greenplum-db-4.3.7.3/greenplum_path.sh äº¤æ¢é’¥åŒ™ï¼š 1gpssh-exkeys -f ./conf/hostlist PSï¼š ä¸€ä¸ªå°é—®é¢˜ socket.gaierror: [Errno -2] Name or service not known 1åŸå›  hosts é‡Œæ²¡æœ‰é…ç½® hostname ä¸­çš„ IP å¼€å§‹å®‰è£…æ•°æ®åº“ï¼š 1gpseginstall -f hostlist -u gpadmin -p 123456 åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šåˆ›å»ºæ•°æ®ç›®å½•ï¼š 1234567891011121314#gp_master_standby:mkdir -p /home/gpadmin/gpdata/gpmaster#sdw1_standby:mkdir -p /home/gpadmin/gpdata/gpdata1mkdir -p /home/gpadmin/gpdata/gpdatap1mkdir -p /home/gpadmin/gpdata/gpdatap2mkdir -p /home/gpadmin/gpdata/gpdatam1mkdir -p /home/gpadmin/gpdata/gpdatam2#sdw2_standbymkdir -p /home/gpadmin/gpdata/gpmastermkdir -p /home/gpadmin/gpdata/gpdatap1mkdir -p /home/gpadmin/gpdata/gpdatap2mkdir -p /home/gpadmin/gpdata/gpdatam1mkdir -p /home/gpadmin/gpdata/gpdatam2 æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒï¼š 12#é”™è¯¯æš‚ä¸”ä¸ç®¡ ( å¥½åƒå¹¶æ²¡æœ‰å½±å“ )gpcheck -f ./conf/hostlist -m Master_standby -s sdw2_standby ç¼–å†™åˆå§‹åŒ–æ–‡ä»¶ï¼š 1234567891011121314151617181920212223#æ•°æ®åº“ä»£å·ARRAY_NAME=\"EMC Greenplum DW\"MACHINE_LIST_FILE=/home/gpadmin/conf/seg_hosts#Segment çš„åç§°å‰ç¼€SEG_PREFIX=gpseg#primary segment èµ·å§‹ç«¯å£å·PORT_BASE=40000#æŒ‡å®š primary segment çš„æ•°æ®ç›®å½•declare -a DATA_DIRECTORY=(/home/gpadmin/gpdata/gpdatap1 /home/gpadmin/gpdata/gpdatap2)MASTER_HOSTNAME=gp_master_standbyMASTER_DIRECTORY=/home/gpadmin/gpdata/gpmasterMASTER_DATA_DIRECTORY=/home/gpadmin/gpdata/gpmasterMASTER_PORT=5432#æŒ‡å®š bash çš„ç‰ˆæœ¬TRUSTED_SHELL=ssh#mirror segment èµ·å§‹ç«¯å£å·MIRROR_PORT_BASE=50000#primary segment ä¸»å¤‡åŒæ­¥çš„èµ·å§‹ç«¯å£å·REPLICATION_PORT_BASE=41000#mirror segment ä¸»å¤‡åŒæ­¥çš„èµ·å§‹ç«¯å£å·MIRROR_REPLICATION_PORT_BASE=51000#mirror segment çš„æ•°æ®ç›®å½•declare -a MIRROR_DATA_DIRECTORY=(/home/gpadmin/gpdata/gpdatam1 /home/gpadmin/gpdata/gpdatam2) åˆå§‹åŒ–æ•°æ®åº“ï¼š 1gpinitsystem -c ./conf/gp_init_config -s sdw2_standby å¯åŠ¨æ•°æ®åº“ : 1gpstart -a è‡³æ­¤ï¼Œæ•°æ®åº“å®‰è£…å®Œæ¯•ï¼Œå‡†å¤‡è¿ç§»æ•°æ®ã€‚ 5.è¿ç§»æ•°æ®åº“Greenplumæ•°æ®åº“è¿ç§»å¯ä»¥ä½¿ç”¨å®˜æ–¹è‡ªå¸¦å·¥å…·gptransferè¿›è¡Œè¿ç§»ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å‚ç…§å®˜ç½‘ ( https://gp-docs-cn.github.io/docs/best_practices/gptransfer.html) ä¿®æ”¹æºæ•°æ®åº“ä¸­é…ç½®æ–‡ä»¶ï¼š 1vim /home/gpadmin/gpdata/gpmaster/gpseg-1/pg_hba.conf æ·»åŠ å¦‚ä¸‹ ( IPèŒƒå›´ä¸º192.168.216.1 - 192.168.216.254 ) ï¼š 1host all all 192.168.216.1/24 md5 åœ¨æºæ•°æ®åº“ä¸­é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼š 1select pg_reload_conf() å‡†å¤‡æ‰“é€šç›®æ ‡æ•°æ®åº“ä¸æºæ•°æ®åº“ä¹‹é—´çš„é€šé“ï¼Œåˆ›å»ºæ˜ å°„æ–‡ä»¶ï¼š 1vim ./conf/transferlist 12sdw1,192.168.216.129sdw2,192.168.216.130 1vim ./conf/transhost 12345sdw2_standbysdw1_standbymastersdw1sdw2 äº¤æ¢é’¥åŒ™ï¼š 1gpssh-exkeys -f /home/gpadmin/conf/transhost å¼€å§‹è¿ç§»æ•°æ®ï¼š 1/home/gpadmin/greenplum-db-4.3.7.3/bin//gptransfer --source-map-file=/home/gpadmin/conf/transferlist --dest-host=192.168.216.128 --full è¿ç§»å®Œæ¯•ï¼š å°†æºæ•°æ®åº“ä¸­çš„é…ç½®æ–‡ä»¶postgresql.confå’Œpg_hba.confå‘é€è‡³ç›®æ ‡æ•°æ®åº“ä¸­ï¼Œé‡å¯ç›®æ ‡æ•°æ®åº“ã€‚ è‡³æ­¤æ•°æ®åº“è¿ç§»å®Œæ¯•ã€‚ å‚è€ƒç½‘å€â‘  https://gp-docs-cn.github.io/docs/best_practices/gptransfer.html â‘¡ https://www.cnblogs.com/liuyungao/p/5689588.html","categories":[{"name":"Greenplum","slug":"Greenplum","permalink":"https://39.97.115.194/categories/Greenplum/"}],"tags":[{"name":"Greenplum","slug":"Greenplum","permalink":"https://39.97.115.194/tags/Greenplum/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://39.97.115.194/tags/æ•°æ®åº“/"},{"name":"æ•°æ®è¿ç§»","slug":"æ•°æ®è¿ç§»","permalink":"https://39.97.115.194/tags/æ•°æ®è¿ç§»/"}]},{"title":"GreenplumæŸ¥çœ‹æ•°æ®åº“å’Œè¡¨æ‰€å ç£ç›˜å¤§å°","slug":"GreenplumæŸ¥çœ‹æ•°æ®åº“å’Œè¡¨æ‰€å ç£ç›˜å¤§å°","date":"2018-12-05T07:37:00.000Z","updated":"2019-05-15T07:53:00.250Z","comments":true,"path":"2018/12/05/GreenplumæŸ¥çœ‹æ•°æ®åº“å’Œè¡¨æ‰€å ç£ç›˜å¤§å°/","link":"","permalink":"https://39.97.115.194/2018/12/05/GreenplumæŸ¥çœ‹æ•°æ®åº“å’Œè¡¨æ‰€å ç£ç›˜å¤§å°/","excerpt":"æŸ¥çœ‹æ•°æ®åº“æ‰€å ç£ç›˜å¤§å°çš„å‡ æ¡å‘½ä»¤ã€‚","text":"æŸ¥çœ‹æ•°æ®åº“æ‰€å ç£ç›˜å¤§å°çš„å‡ æ¡å‘½ä»¤ã€‚ è¡¨çš„å¤§å° : 12345select pg_size_pretty(pg_relation_size('gp_test')); pg_size_pretty ---------------- 1761 MB(1 row) è¡¨å’Œç´¢å¼•çš„å¤§å° : 12345select pg_size_pretty(pg_total_relation_size('gp_test')); pg_size_pretty ---------------- 2186 MB(1 row) æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å¤§å° : 12345select pg_size_pretty(pg_database_size('zwcdb')); pg_size_pretty ---------------- 2241 MB(1 row) æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“çš„å¤§å° : 123456789select datname,pg_size_pretty(pg_database_size(datname)) from pg_database; datname | pg_size_pretty -----------+---------------- zwcdb | 2241 MB postgres | 47 MB template1 | 47 MB template0 | 45 MB gpperfmon | 67 MB(5 rows) æŸ¥çœ‹æ•°æ®åˆ†å¸ƒæƒ…å†µå’Œç£ç›˜ç©ºé—´ : 12345678910111213141516select gp_segment_id,count(*) from gp_test group by gp_segment_id order by 1; gp_segment_id | count ---------------+--------- 0 | 5000000 1 | 4999999 2 | 5000001 3 | 5000000(4 rows) select dfhostname, dfspace,dfdevice from gp_toolkit.gp_disk_free order by dfhostname; dfhostname | dfspace | dfdevice ------------+----------+------------ sdw1 | 12273372 | /dev/sdb1 sdw1 | 12273372 | /dev/sdb1 sdw2 | 12273404 | /dev/sdb1 sdw2 | 12273404 | /dev/sdb1","categories":[{"name":"Greenplum","slug":"Greenplum","permalink":"https://39.97.115.194/categories/Greenplum/"}],"tags":[{"name":"Greenplum","slug":"Greenplum","permalink":"https://39.97.115.194/tags/Greenplum/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://39.97.115.194/tags/æ•°æ®åº“/"}]}]}